<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dimitri's Blog</title>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>MathJax={"tex":{"inlineMath":[["$","$"],["\\(","\\)"]],"displayMath":[["$$","$$"],["\\[","\\]"]]},"svg":{"fontCache":"global"}}</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.2.12/marked.min.js"></script>

    <link rel="stylesheet" href="smith.css">
    <!-- Local-file fallbacks in case fetch() is blocked (file://) -->
    <script id="posts-json" type="application/json">
[
    {
        "title": "Sphere Packing",
        "filename": "post8.md",
        "date": "2025-3-19",
        "author": "Post 7",
        "bio": "How to pack spheres into your 3d model",
        "categories": ["Computer"]
    },
    {
        "title": "Small Physics Sim For Balls",
        "filename": "post7.md",
        "date": "2025-2-25",
        "author": "Post 7",
        "bio": "Playing around with a balls in verlet integration",
        "categories": ["Computer Graphics", "Physics"]
    },
    {
        "title": "Cool Complex Shapes",
        "filename": "post6.md",
        "date": "2025-1-19",
        "author": "Post 6",
        "bio": "Mandelebulb, Julia set, Kleinian limit set-Maskit, Newton's Fractal",
        "categories": ["Mathematics"]
    },
    {
        "title": "Graphing Some English Words",
        "filename": "post5.md",
        "date": "2025-1-6",
        "author": "Post 5",
        "bio": "Making cool graphs with some words",
        "categories": ["Graph Theory"]
    },
    {
        "title": "Solving a Polynomial",
        "filename": "post4.md",
        "date": "2025-1-3",
        "author": "Post 4",
        "bio": "How to find roots of a polynomial",
        "categories": ["Mathematics"]
    },
    {
        "title": "Blending Spheres",
        "filename": "post3.md",
        "date": "2024-12-26",
        "author": "Post 3",
        "bio": "How to blend spheres together",
        "categories": ["Mathematics", "Computer"]
    },
    {
        "title": "LaTeX Now Works",
        "filename": "post2.md",
        "date": "2024-12-20",
        "author": "Post 2",
        "bio": "A fun little dive into Fourier series, its coefficients, and applications in animation.",
        "categories": ["Mathematics"]
    },
    {
        "title": "0.0.0 Post!!",
        "filename": "post1.md",
        "date": "2024-12-19",
        "author": "Post 1",
        "bio": "git commit 'intial commit' --> git push -u origin main\n",
        "categories": ["Fun"]
    }
]
    </script>
    <script id="colors-json" type="application/json">
{
    "Mathematics": "darkblue",
    "Fun": "red",
    "Blog": "green",
    "First": "orange",
    "Science": "purple",
    "Technology": "teal",
    "Art": "pink",
    "Education": "yellow",
    "Computer": "purple",
    "Graph Theory": "teal",
    "Physics": "orange"
}
    </script>
</head>
<body>
    <div id="scene-container"></div>
    <div id="canvas-container"></div>
    <header class="header">
        <div class="header-content">
            <h1 class="header-title">Dimitri's Blog</h1>
            <div class="header-subtitle"> This is not nearly a complete repository of all my projects. I purely write things here for fun</div>
        </div>
    </header>

    <main class="content">
        <div id="main-content"></div>
    </main>

    <!-- Local-file fallback: inline markdown for post7 -->
    <script id="post-post7.md" type="text/markdown">
# Physics-Based Particle Simulations: A Deep Dive
### SRC: https://github.com/DimitriChrysafis/BallDrawer
## Two Verlet Integration Demonstrations

<video width="1000" controls autoplay muted>  
  <source src="../media/post7/initial.mp4" type="video/mp4">  
  Your browser does not support the video tag.  
</video>

<div style="position: relative; width: 100%; padding-bottom: 56.25%; height: 0;">
  <iframe 
    width="100%" 
    height="500" 
    src="https://www.youtube.com/embed/Gz6gZwLvjaw" 
    frameborder="0" 
    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" 
    allowfullscreen> 
  </iframe> 
</div>

## KEY IDEA HOW IT WORKS: 

Before each video is recorded, a complete physics simulation runs with predefined parameters. All particles begin as uniform red balls, which later map to colors from a target image. This document provides a comprehensive explanation of the mathematical foundations and implementation details powering these simulations.

---

<br />



## 1. The Mathematical Base: Verlet Integration

Verlet integration is key for the actual physics engine powering this


<br />

### 1.1 Classical Verlet Integration Formulation

The standard Verlet integration equation updates a particle's position based on its current position, previous position, and acceleration:

$$x(t+\Delta t) = 2x(t) - x(t-\Delta t) + a(t)\Delta t^2$$

<br />

Where:
- $x(t)$ represents the current position at time $t$
- 
<br />

- $x(t-\Delta t)$ represents the previous position at time $t-\Delta t$ 
- 
<br />

- $a(t)$ is the acceleration vector at time $t$
- 
<br />

- $\Delta t$ is the discrete time step


<br />

The true reason that this formula is the goat is that velocity is implicit in the term $(x(t) - x(t-\Delta t))$, meaning we don't need to explicitly store or update velocity vectors.

<br />

### 1.2 Derivation and understanding

<br />

To understand why Verlet integration works so well, we can derive it from Taylor series expansions of the position function.

<br />

For a position function $x(t)$ with continuous derivatives, the Taylor expansions around time $t$ are:

Forward expansion:
$$x(t+\Delta t) = x(t) + v(t)\Delta t + \frac{1}{2}a(t)\Delta t^2 + \frac{1}{6}\dddot{x}(t)\Delta t^3 + O(\Delta t^4)$$

Backward expansion:
$$x(t-\Delta t) = x(t) - v(t)\Delta t + \frac{1}{2}a(t)\Delta t^2 - \frac{1}{6}\dddot{x}(t)\Delta t^3 + O(\Delta t^4)$$

Adding these two equations:
$$x(t+\Delta t) + x(t-\Delta t) = 2x(t) + a(t)\Delta t^2 + O(\Delta t^4)$$


<br />

If you can see, the first order terms (velocity) cancel out, and the third-order terms also cancel, leaving us with an error of order $O(\Delta t^4)$, which is better than many standard integrators. Rearranging:

$$x(t+\Delta t) = 2x(t) - x(t-\Delta t) + a(t)\Delta t^2 + O(\Delta t^4)$$

Now just drop the error term gives us the standard Verlet formula.


<br />

### 1.3 How to make this stable at high velocities

A lot of the time when you have lots of quickly moving balls, thinks break :() Here is a way to (sort of) get around that.

$$\Delta t_{sub} = \frac{\Delta t}{N_{substeps}}$$

The simulation uses $\Delta t = \frac{1}{60}$ seconds (matching typical display refresh rates) and $N_{substeps} = 8$, giving:

$$\Delta t_{sub} = \frac{1}{480} \approx 0.00208 \text{ seconds}$$

Each frame, we perform $N_{substeps}$ iterations of the physics update, which is basically just increasing the resolution during collision handling. This prevents tunneling (particles passing through barriers) and improves the accuracy of collision responses.

<br />

The total acceleration per substep becomes:

$$a_{sub} = a \cdot \frac{\Delta t_{sub}^2}{\Delta t^2} = a \cdot \frac{1}{N_{substeps}^2}$$

### 1.4 Extra Note
This far better than explicit Euler integration which tends to artificially increase energy

<br />

---

<br />

## 2. Collision Detection and Response

<br />

... (content continues in actual file) ...
    </script>

    <script src="bob.js"></script>
</body>
</html>
